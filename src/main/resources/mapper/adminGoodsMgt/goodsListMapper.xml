<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dao.adminGoodsMgt.GoodsListDaoImpl">
	<!-- 물품목록리스트 가져오기 -->
	<select id="selectGoodsList" resultType="com.vo.adminGoodsMgt.GoodsListVO">
	<!-- goodsListMapper.selectGoodsList -->
	SELECT
        a.GD_NO as gdNo
		,a.GD_GP as gdGp
		,a.GD_SP as gdSp
		,a.GD_NM as gdNm
		,a.GD_CNT as gdCnt
		,a.GD_PAGE as gdPage
		,a.GD_THICK as gdThick
		,a.GD_WR as gdWr
		,a.GD_PB as gdPb
		,a.GD_DC as gdDc
		,a.GD_YN as gdYn
		,a.GD_IMG as gdImg
        ,b.cm_grnm as gdGpNm
        ,c.cm_grnm as gdSpNm
	FROM GOODS_INFO a 
	left OUTER JOIN CMCD_MGT b ON  b.CM_GRCD= a.GD_GP
	left OUTER JOIN CMCD_MGT c ON c.CM_GRCD = a.GD_SP and c.CM_UPCD = a.GD_GP
	ORDER BY a.GD_NO DESC
	</select>
	
	<!-- 하나의 물품정보 가져오기 -->
	<select id="selectDetailGoods" parameterType="String" resultType="com.vo.adminGoodsMgt.GoodsListVO">
	<!-- goodsListMapper.selectDetailGoods -->
	SELECT
		GD_NO as gdNo
		,GD_GP as gdGp
		,GD_SP as gdSp
		,GD_NM as gdNm
		,GD_CNT as gdCnt
		,GD_PAGE as gdPage
		,GD_THICK as gdThick
		,GD_WR as gdWr
		,GD_PB as gdPb
		,GD_DC as gdDc
		,GD_YN as gdYn
		,GD_IMG as gdImg
		,GD_DETL as gdDetl
	  FROM GOODS_INFO
	 WHERE GD_NO = #{gdNo}
	</select>
	
	<!-- 물품상세 수정 하기 -->
	<update id="updateGoods" parameterType="com.vo.adminGoodsMgt.GoodsRegVO">
	<!-- goodsListMapper.updateGoods -->
	UPDATE GOODS_INFO
	SET
		GD_GP = #{gdGp}
		,GD_SP = #{gdSp}
		,GD_NM = #{gdNm}
		,GD_CNT = #{gdCnt}
		,GD_PAGE = #{gdPage}
		,GD_THICK = #{gdThick}
		,GD_WR = #{gdWr}
		,GD_PB = #{gdPb}
		,GD_DC = #{gdDc}
		,GD_YN = #{gdYn}
		<if test='gdImg != null'>
		,GD_IMG = #{gdImg}
		</if>
		<if test='gdDetl != null'>
		,GD_DETL = #{gdDetl}
		</if>
	WHERE GD_NO = #{gdNo}
	</update>
</mapper>
